DEBUG:tzlocal:/etc/localtime found
DEBUG:tzlocal:1 found:
 {'/etc/localtime is a symlink to': 'America/Chicago'}
INFO:apscheduler.scheduler:Scheduler started
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:google.auth._default:Checking /Users/kerimamansaryyev/Desktop/dart_projects/ribbit/ribbit_notification_scheduler/service-account-file.json for explicit credentials as part of auth process...
DEBUG:apscheduler.scheduler:No jobs; waiting until a job is added
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:9080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:tzlocal:/etc/localtime found
DEBUG:tzlocal:1 found:
 {'/etc/localtime is a symlink to': 'America/Chicago'}
INFO:apscheduler.scheduler:Scheduler started
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:google.auth._default:Checking /Users/kerimamansaryyev/Desktop/dart_projects/ribbit/ribbit_notification_scheduler/service-account-file.json for explicit credentials as part of auth process...
DEBUG:apscheduler.scheduler:No jobs; waiting until a job is added
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:9080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:tzlocal:/etc/localtime found
DEBUG:tzlocal:1 found:
 {'/etc/localtime is a symlink to': 'America/Chicago'}
INFO:apscheduler.scheduler:Scheduler started
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:google.auth._default:Checking /Users/kerimamansaryyev/Desktop/dart_projects/ribbit/ribbit_notification_scheduler/service-account-file.json for explicit credentials as part of auth process...
DEBUG:apscheduler.scheduler:No jobs; waiting until a job is added
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:9080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:tzlocal:/etc/localtime found
DEBUG:tzlocal:1 found:
 {'/etc/localtime is a symlink to': 'America/Chicago'}
DEBUG:app:Scheduled reminder asd to 2024-05-21 16:58:21.273621-05:00
INFO:apscheduler.scheduler:Added job "__schedule_reminder.<locals>.run_func" to job store "default"
INFO:werkzeug:127.0.0.1 - - [21/May/2024 16:57:56] "POST /api/schedule/reminder HTTP/1.1" 200 -
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2024-05-21 16:58:21.273621-05:00 (in 24.347532 seconds)
DEBUG:apscheduler.scheduler:Looking for jobs to run
INFO:apscheduler.executors.default:Running job "__schedule_reminder.<locals>.run_func (trigger: date[2024-05-21 16:58:21 CDT], next run at: 2024-05-21 16:58:21 CDT)" (scheduled at 2024-05-21 16:58:21.273621-05:00)
INFO:apscheduler.scheduler:Removed job 12
INFO:app:Hello
DEBUG:apscheduler.scheduler:No jobs; waiting until a job is added
INFO:apscheduler.executors.default:Job "__schedule_reminder.<locals>.run_func (trigger: date[2024-05-21 16:58:21 CDT], next run at: 2024-05-21 16:58:21 CDT)" executed successfully
DEBUG:tzlocal:/etc/localtime found
DEBUG:tzlocal:1 found:
 {'/etc/localtime is a symlink to': 'America/Chicago'}
INFO:apscheduler.scheduler:Scheduler started
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:google.auth._default:Checking /Users/kerimamansaryyev/Desktop/dart_projects/ribbit/ribbit_notification_scheduler/service-account-file.json for explicit credentials as part of auth process...
DEBUG:apscheduler.scheduler:No jobs; waiting until a job is added
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:9080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:tzlocal:/etc/localtime found
DEBUG:tzlocal:1 found:
 {'/etc/localtime is a symlink to': 'America/Chicago'}
INFO:apscheduler.scheduler:Scheduler started
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:google.auth._default:Checking /Users/kerimamansaryyev/Desktop/dart_projects/ribbit/ribbit_notification_scheduler/service-account-file.json for explicit credentials as part of auth process...
DEBUG:apscheduler.scheduler:No jobs; waiting until a job is added
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:9080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:tzlocal:/etc/localtime found
DEBUG:tzlocal:1 found:
 {'/etc/localtime is a symlink to': 'America/Chicago'}
DEBUG:app:Scheduled reminder asd to 2024-05-21 17:00:21.273621-05:00
INFO:apscheduler.scheduler:Added job "__schedule_reminder.<locals>.run_func" to job store "default"
INFO:werkzeug:127.0.0.1 - - [21/May/2024 16:59:38] "POST /api/schedule/reminder HTTP/1.1" 200 -
DEBUG:apscheduler.scheduler:Looking for jobs to run
DEBUG:apscheduler.scheduler:Next wakeup is due at 2024-05-21 17:00:21.273621-05:00 (in 42.536287 seconds)
DEBUG:apscheduler.scheduler:Looking for jobs to run
INFO:apscheduler.executors.default:Running job "__schedule_reminder.<locals>.run_func (trigger: date[2024-05-21 17:00:21 CDT], next run at: 2024-05-21 17:00:21 CDT)" (scheduled at 2024-05-21 17:00:21.273621-05:00)
DEBUG:urllib3.util.retry:Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
DEBUG:google.auth.transport.requests:Making request: POST https://oauth2.googleapis.com/token
INFO:apscheduler.scheduler:Removed job 12
DEBUG:apscheduler.scheduler:No jobs; waiting until a job is added
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oauth2.googleapis.com:443
DEBUG:urllib3.connectionpool:https://oauth2.googleapis.com:443 "POST /token HTTP/1.1" 200 None
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): fcm.googleapis.com:443
DEBUG:urllib3.connectionpool:https://fcm.googleapis.com:443 "POST /v1/projects/ribbit-19c5d/messages:send HTTP/1.1" 400 None
ERROR:app:Firebase error when trying to send notification: $The registration token is not a valid FCM registration token
Traceback (most recent call last):
  File "/Users/kerimamansaryyev/Desktop/dart_projects/ribbit/ribbit_notification_scheduler/.venv/lib/python3.12/site-packages/firebase_admin/messaging.py", line 411, in send
    resp = self._client.body(
           ^^^^^^^^^^^^^^^^^^
  File "/Users/kerimamansaryyev/Desktop/dart_projects/ribbit/ribbit_notification_scheduler/.venv/lib/python3.12/site-packages/firebase_admin/_http_client.py", line 131, in body
    resp = self.request(method, url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kerimamansaryyev/Desktop/dart_projects/ribbit/ribbit_notification_scheduler/.venv/lib/python3.12/site-packages/firebase_admin/_http_client.py", line 119, in request
    resp.raise_for_status()
  File "/Users/kerimamansaryyev/Desktop/dart_projects/ribbit/ribbit_notification_scheduler/.venv/lib/python3.12/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://fcm.googleapis.com/v1/projects/ribbit-19c5d/messages:send

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/kerimamansaryyev/Desktop/dart_projects/ribbit/ribbit_notification_scheduler/integration/push_notification_messaging_service.py", line 22, in send_notification
    response = messaging.send(message)
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kerimamansaryyev/Desktop/dart_projects/ribbit/ribbit_notification_scheduler/.venv/lib/python3.12/site-packages/firebase_admin/messaging.py", line 121, in send
    return _get_messaging_service(app).send(message, dry_run)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/kerimamansaryyev/Desktop/dart_projects/ribbit/ribbit_notification_scheduler/.venv/lib/python3.12/site-packages/firebase_admin/messaging.py", line 418, in send
    raise self._handle_fcm_error(error)
firebase_admin.exceptions.InvalidArgumentError: The registration token is not a valid FCM registration token
INFO:apscheduler.executors.default:Job "__schedule_reminder.<locals>.run_func (trigger: date[2024-05-21 17:00:21 CDT], next run at: 2024-05-21 17:00:21 CDT)" executed successfully
